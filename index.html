<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Budget Mensuel</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
    h1, h2 { color: #333; }
    .card { background: white; padding: 15px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 10px; }
    input, button { padding: 8px; margin-top: 5px; width: 100%; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #eee; }
    .success { color: green; font-weight: bold; }
    .warning { color: red; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Gestionnaire de Budget</h1>

  <div class="card">
    <h2>Salaire</h2>
    <label>Entrer votre salaire mensuel :</label>
    <input type="number" id="salaireInput" placeholder="Ex: 263000">
    <button onclick="enregistrerSalaire()">Enregistrer le salaire</button>
    <p id="salaireAffiche"></p>
  </div>

  <div class="card">
    <h2>Ajouter une enveloppe</h2>
    <label>Nom de l'enveloppe :</label>
    <input type="text" id="nomEnveloppe" placeholder="√âpargne, Loisirs...">
    <label>Montant :</label>
    <input type="number" id="montantEnveloppe" placeholder="Ex: 40000">
    <button onclick="ajouterEnveloppe()">Ajouter</button>
  </div>

  <div class="card">
    <h2>R√©partition des enveloppes</h2>
    <table>
      <thead>
        <tr>
          <th>Enveloppe</th>
          <th>Montant</th>
        </tr>
      </thead>
      <tbody id="listeEnveloppes"></tbody>
    </table>
    <p id="totalEnveloppes"></p>
    <p id="resteSalaire"></p>
  </div>

  <div class="card">
    <h2>Projection annuelle</h2>
    <p id="projection"></p>
  </div>

  <script>
    let salaire = 0;
    let enveloppes = [];

    // Charger depuis LocalStorage
    if(localStorage.getItem("salaire")) salaire = parseInt(localStorage.getItem("salaire"));
    if(localStorage.getItem("enveloppes")) enveloppes = JSON.parse(localStorage.getItem("enveloppes"));

    afficherSalaire();
    afficherEnveloppes();

    function enregistrerSalaire() {
      const val = document.getElementById("salaireInput").value;
      if(val && val > 0) {
        salaire = parseInt(val);
        localStorage.setItem("salaire", salaire);
        afficherSalaire();
        afficherEnveloppes();
      } else {
        alert("Veuillez entrer un salaire valide.");
      }
    }

    function afficherSalaire() {
      if(salaire > 0) {
        document.getElementById("salaireAffiche").innerHTML = 
          "üí∞ Salaire enregistr√© : " + salaire.toLocaleString() + " DZD";
      }
    }

    function ajouterEnveloppe() {
      const nom = document.getElementById("nomEnveloppe").value.trim();
      const montant = parseInt(document.getElementById("montantEnveloppe").value);

      if(nom && montant > 0) {
        enveloppes.push({ nom, montant });
        localStorage.setItem("enveloppes", JSON.stringify(enveloppes));
        afficherEnveloppes();
        document.getElementById("nomEnveloppe").value = "";
        document.getElementById("montantEnveloppe").value = "";
      } else {
        alert("Veuillez entrer un nom et un montant valide.");
      }
    }

    function afficherEnveloppes() {
      const tbody = document.getElementById("listeEnveloppes");
      tbody.innerHTML = "";
      let total = 0;

      enveloppes.forEach(env => {
        total += env.montant;
        tbody.innerHTML += `<tr><td>${env.nom}</td><td>${env.montant.toLocaleString()} DZD</td></tr>`;
      });

      document.getElementById("totalEnveloppes").innerHTML = "üìä Total enveloppes : " + total.toLocaleString() + " DZD";

      if(salaire > 0) {
        let reste = salaire - total;
        document.getElementById("resteSalaire").innerHTML = reste >= 0
          ? `<span class="success">‚úÖ Reste disponible : ${reste.toLocaleString()} DZD</span>`
          : `<span class="warning">‚ö†Ô∏è D√©passement de budget : ${reste.toLocaleString()} DZD</span>`;
        
        document.getElementById("projection").innerHTML = 
          "Sur 12 mois, vous pouvez √©pargner environ : " + (reste * 12).toLocaleString() + " DZD";
      }
    }
  </script>
</body>
</html>
